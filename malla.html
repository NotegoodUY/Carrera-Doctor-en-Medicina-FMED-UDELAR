<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malla Interactiva – Medicina UDELAR (Notegood)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css?v=41">
</head>
<body>
  <header class="ng-header" role="banner">
    <div class="header-top container">
      <a href="index.html" class="logo">Notegood.uy ✨</a>
      <div class="controls">
        <span id="userBadge" class="user-badge" style="display:none"></span>
        <button id="resetBtn" class="btn ghost" title="Borrar">🗑️ Borrar</button>
        <button id="themeToggle" class="btn ghost" title="Modo oscuro">🌙</button>
        <button id="loginGoogle" class="btn ghost" title="Entrar" style="display:none">🔐 Entrar</button>
        <button id="logoutBtn" class="btn ghost" title="Salir" style="display:none">🚪 Salir</button>
      </div>
    </div>

    <div class="header-bottom">
      <div class="progress">
        <div class="progress-track"></div>
        <div id="progressBar" class="progress-bar" style="width:0"></div>
      </div>
      <div class="legend">
        <span class="chip done">Aprobada</span>
        <span class="chip unlocked">Disponible</span>
        <span class="chip locked">Bloqueada</span>
      </div>
      <div class="progress-kpi">
        <span id="progressPct">0%</span>
        <span id="progressMsg" class="progress-msg">¡A empezar!</span>
      </div>
    </div>
  </header>

  <main id="malla" class="grid-container" role="main" aria-live="polite"></main>

  <footer class="ng-footer">
    <p id="progressText">0 / 0 materias aprobadas · 0%</p>
  </footer>

  <!-- Modal Notas -->
  <dialog id="noteModal">
    <form method="dialog" class="note-form">
      <h3 id="noteTitle">Notas</h3>
      <div class="field">
        <span>Nota (0–12 opcional)</span>
        <input id="gradeInput" type="number" min="0" max="12" step="1" inputmode="numeric">
      </div>
      <div class="field">
        <span>Notas (texto libre)</span>
        <textarea id="noteText" rows="6" placeholder="Resumen, recordatorios, etc."></textarea>
      </div>
      <div class="note-actions">
        <button value="cancel" class="btn">Cancelar</button>
        <button id="saveNoteBtn" class="btn-pri" value="default">Guardar</button>
      </div>
    </form>
  </dialog>

  <div id="confetti"></div>

  <!-- FAB Instagram -->
  <a class="fab-ig" href="https://www.instagram.com/notegood.uy/" target="_blank" rel="noopener" aria-label="Instagram">
    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5a5.5 5.5 0 1 1 0 11.001A5.5 5.5 0 0 1 12 7.5zm0 2a3.5 3.5 0 1 0 .001 7.001A3.5 3.5 0 0 0 12 9.5zM18 6.4a1.1 1.1 0 1 1 0 2.2 1.1 1.1 0 0 1 0-2.2z"/></svg>
  </a>

  <!-- Firebase (Compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>

  <!-- Config -->
  <script>
    window.FB_CONFIG = {
      apiKey: "AIzaSyB80csmSE6YMXkNyyBo9y8j6iIT3pHsebs",
      authDomain: "notegood-uy.firebaseapp.com",
      projectId: "notegood-uy",
      storageBucket: "notegood-uy.firebasestorage.app",
      messagingSenderId: "690615845783",
      appId: "1:690615845783:web:6f6bfacc9f3d77d1dfbad2",
      measurementId: "G-4SL4JL2GH5"
    };
    if (!firebase.apps?.length) firebase.initializeApp(window.FB_CONFIG);
  </script>

  <script src="js/app.firebase.js?v=41" defer></script>
</body>
</html>
