:root{
  --bg:#ffffff; --card:#f9f9fb; --muted:#6b7280; --text:#111827;
  --brand:#6c5ce7; --accent:#00bfa6; --chip:#eef2ff; --chip-b:#c7d2fe; --line:#e5e7eb;
  --y1:#f3e8ff; --y2:#dbeafe; --y3:#dcfce7; --y4:#fee2e2; --y5:#fef3c7; --y6:#e0e7ff; --y7:#fae8ff;
  --shadow:0 1px 2px rgba(15,23,42,.06), 0 10px 28px rgba(15,23,42,.05);
  --progress-track:#e5e7eb; --progress-bg:rgba(108,92,231,.12);
}
body.dark{
  --bg:#0b1020; --card:#0f162b; --muted:#a0aec0; --text:#e5e7eb;
  --brand:#8b7dff; --accent:#03c9b5; --chip:#141e3a; --chip-b:#26345c; --line:#1f2a44;
  --y1:#1b1540; --y2:#14203b; --y3:#0f2e2a; --y4:#3a1b22; --y5:#3b2e12; --y6:#1a1b3a; --y7:#2f1340;
  --shadow:0 1px 2px rgba(0,0,0,.35), 0 10px 28px rgba(0,0,0,.35);
  --progress-track:#1f2a44;
}
*{box-sizing:border-box} html,body{height:100%}
body{ margin:0; background:var(--bg); color:var(--text);
  font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale }

/* HEADER */
.ng-header{ padding:1rem 1rem 1.4rem; background:linear-gradient(90deg,var(--brand),#9a7bff); color:#fff; border-bottom:1px solid rgba(255,255,255,.2) }
body.dark .ng-header{ background:linear-gradient(90deg,#5b4bff,#8b7dff) }
.header-top{ display:flex; align-items:center; justify-content:space-between; gap:.75rem; flex-wrap:wrap }
.logo{ display:inline-flex; align-items:center; justify-content:center; height:38px; min-width:148px; padding:0 14px; font-weight:700; letter-spacing:.2px; border-radius:999px; background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.25); color:#fff; text-decoration:none }
.controls{ display:flex; align-items:center; gap:.6rem; flex-wrap:wrap }
.btn{ border:1px solid rgba(255,255,255,.35); background:transparent; color:#fff; padding:.45rem .75rem; border-radius:12px; font-weight:600; cursor:pointer }
.btn:hover{ background:rgba(255,255,255,.12) }
.btn-pri{ display:inline-flex; align-items:center; justify-content:center; gap:.5rem; padding:.7rem 1rem; font-weight:700; border-radius:999px; border:1px solid transparent; cursor:pointer; background:linear-gradient(90deg,var(--brand),var(--accent)); color:#fff; box-shadow:var(--shadow) }

/* PROGRESO: track + bar + texto correcto */
.progress{ position:relative; max-width:980px; margin:.8rem auto 0; padding:0 1rem; height:12px }
.progress-track{ position:absolute; left:1rem; right:1rem; top:0; height:12px; background:var(--progress-track); border-radius:999px }
.progress-bar{ position:absolute; left:1rem; top:0; height:12px; background:linear-gradient(90deg,var(--brand),var(--accent)); border-radius:999px; box-shadow:inset 0 0 0 3px var(--progress-bg) }
.progress-kpi{ max-width:980px; margin:.2rem auto 0; padding:0 1rem; text-align:right; font-weight:700 }

/* LEYENDA con EMOJIS */
.legend{ margin-top:.8rem; display:flex; gap:.6rem; justify-content:center; flex-wrap:wrap; font-size:.9rem }
.chip{ background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.25); padding:.25rem .6rem; border-radius:999px; display:inline-flex; align-items:center; gap:.45rem; color:#fff }
body:not(.dark) .chip{ color:#111827; background:var(--chip); border-color:var(--chip-b) }
.chip.done::before{ content:'âœ…'; }
.chip.unlocked::before{ content:'ðŸ”“'; }
.chip.locked::before{ content:'ðŸ”’'; }

/* LAYOUT MALLA */
.grid-container{ display:flex; flex-wrap:wrap; justify-content:center; padding:1rem; gap:1rem }
.year{ min-width:280px; background:var(--card); border-radius:14px; padding:1rem; border:1px solid var(--line); box-shadow:var(--shadow) }
.year h2{ margin:0; text-align:center }
.semestre{ background:var(--chip); border:1px solid var(--chip-b); border-radius:12px; padding:.6rem; margin-top:.7rem }
.semestre h3{ margin:0 0 .45rem 0; color:var(--accent); font-size:1rem }

.materia{ background:#fff; border-radius:12px; padding:.65rem .75rem; margin:.35rem 0; cursor:pointer; font-weight:600; border:1px solid var(--line); position:relative; padding-left:2rem; display:flex; align-items:center; justify-content:space-between; gap:.6rem; transition:transform .06s, box-shadow .15s }
body.dark .materia{ background:#0f162b; border-color:var(--line); color:#e5e7eb }
.materia:hover{ box-shadow:0 0 0 3px rgba(108,92,231,.10); transform:translateY(-1px) }
.materia::before{ content:''; position:absolute; left:.6rem; top:50%; transform:translateY(-50%); width:1.05rem; height:1.05rem; border-radius:999px; border:2px solid #cbd5e1; background:#fff }
body.dark .materia::before{ border-color:#2c3a66; background:#101a33 }
.materia.bloqueada{ background:#f7f7f7; color:var(--muted); pointer-events:none }
body.dark .materia.bloqueada{ background:#121a30; color:#8fa1c2 }
.materia.bloqueada::before{ content:'ðŸ”’'; font-size:.95rem; width:auto; height:auto; border:none; background:transparent }
.materia.tachada{ opacity:.95; color:#065f46; background:#ecfdf5; border-color:#bbf7d0 }
.materia.tachada::before{ content:'âœ“'; display:grid; place-items:center; color:#fff; background:#10b981; border:none; font-weight:700 }

/* FOOTER */
.ng-footer{ display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:1rem 1rem 1.6rem; font-size:.9rem; color:var(--muted); border-top:1px solid var(--line) }

/* CONFETTI: grande y centrado */
#confetti{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:9998 }
.confetti-piece{ position:absolute; font-size:34px; will-change:transform, opacity; animation: confetti-fall 1200ms linear forwards }
@keyframes confetti-fall{
  0%{ transform:translate(var(--x,0), var(--y,0)) scale(1); opacity:1 }
  100%{ transform:translate(calc(var(--x,0) + var(--dx,0px)), calc(var(--y,0) + var(--dy,200px))) rotate(340deg) scale(.9); opacity:0 }
}

/* LANDING (hero) */
body.landing .hero{ display:grid; place-items:center; padding:64px 16px 40px; background:linear-gradient(180deg,var(--bg) 0%, rgba(108,92,231,.06) 100%) }
body.dark.landing .hero{ background:linear-gradient(180deg,var(--bg) 0%, rgba(139,125,255,.12) 100%) }
body.landing .hero-inner{ max-width:960px; width:100%; text-align:center }
.hero-title{ font-size: clamp(28px, 4vw, 44px); font-weight:800; letter-spacing:.2px; margin:0 0 12px }
.hero-title .brand{ color: var(--brand) }
.hero-sub{ font-size: clamp(16px, 2.6vw, 18px); color: var(--muted); max-width:760px; margin: 0 auto 20px }
.hero-cta{ display:flex; gap:.8rem; justify-content:center; margin:18px 0 10px; flex-wrap:wrap }
.hero-list{ list-style:none; padding:0; margin:18px auto 0; display:grid; gap:6px; color:var(--muted); max-width:680px }
.feature-cards{ max-width:960px; margin:28px auto 0; padding:0 16px 24px; display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:14px }
.feature-cards .card{ background:var(--card); border:1px solid var(--line); border-radius:16px; padding:18px; box-shadow: var(--shadow) }

/* RESPONSIVE */
@media (max-width: 820px){
  .grid-container{ padding:.6rem }
  .year{ min-width:100%; padding:.9rem }
}
